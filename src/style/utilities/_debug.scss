// ==========================================================================
// UTILITIES / DEBUG
// ==========================================================================

// Grid debugging settings
// =======================
// Use the visual grid mixin to debug the layout.
// ****************************************************** //
// IMPORTANT! Make sure you comment out or set
// $visual-grid to false before compiling for production.
// ****************************************************** //
$visual-grid: true;
$visual-grid-color: #00d4ff;
$visual-grid-opacity: 0.1;

// If you'd like to debug the baseline as well, just set
// the following variable to true.
// Baseline is calculated based on your $global-font-size
// and your $global-line-height settings.
$visual-baseline: false;
$visual-baseline-color: #ccc;
$visual-baseline-opacity: 0.6;

// Visual grid rendering
// ====================================
// Here we apply the visual grid to the before pseudo-element
// of the body tag.

// sass-lint:disable force-pseudo-nesting

@if variable-exists(visual-grid) and $visual-grid == true {
  body::before {
    @include grid-visual-better(
      rgba($visual-grid-color, $visual-grid-opacity),
      $neat-grid
    );
    display: inline-block;
    position: fixed;
    right: 0;
    left: 0;
    width: 100%;
    max-width: px2em($grid-max-width);
    height: 100%;
    margin: 0 auto;
    content: "";
    z-index: 4;
    pointer-events: none;

    @include grid-media($medium-screen) {
      @include grid-visual-better(
        rgba($visual-grid-color, $visual-grid-opacity),
        $neat-grid-medium
      );
    }
  }
}

// Here we apply the visual baseline to the after pseudo-element of body
@if variable-exists(visual-baseline) and $visual-baseline == true {
  body {
    position: relative;

    &::after {
      @include grid-visual-baseline(
        rgba($visual-baseline-color, $visual-baseline-opacity),
        $visual-baseline
      );
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      min-height: 100vh;
      content: "";
      z-index: 4;
      pointer-events: none;
    }
  }
}

// sass-lint:enable force-pseudo-nesting

// Layout debugging
// ===========================================

@if (config(debug) == true) {
  $debug-color: #f00;

  // Warn when trying to manipulate layout items in grids that are
  // already reversed.

  .o-layout--reverse {
    > [class*="u-push"],
    > [class*="u-pull"] {
      outline: 10px solid $debug-color;
    }
  }

  // Warn when trying to use layout items outside of a layout context.

  .o-layout__item {
    outline: 10px solid $debug-color;

    .o-layout > & {
      outline: none;
    }
  }
}
